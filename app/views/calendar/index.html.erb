<!-- Add this line in the <head> section of app/views/layouts/application.html.erb -->
<div class="mt-4 ms-4">
  <%= link_to '← Back', welcome_path, class: 'framed-button' %>
  <%= link_to 'Export Schedule', export_calendar_index_path(day: @selected_day), class: 'framed-button' %>
  <%= link_to "Download Unassigned RJs", download_unassigned_rjs_calendar_index_path, class: 'framed-button' %>
</div>

<div class="mt-4 ms-4">
  <%= form_with(url: calendar_path, method: :get, local: true) do %>
    <label for="day">Select a day:</label>
    <select name="day" id="day" onchange="this.form.submit()">
      <% %w[Monday Tuesday Wednesday Thursday Friday Saturday Sunday].each do |day| %>
        <option value="<%= day %>" <%= day == @selected_day ? 'selected' : '' %>><%= day %></option>
      <% end %>
    </select>
  <% end %>


  <h2><%= @selected_day %></h2>
</div>

<table>
  <thead>
    <tr>
      <th>Time Slot</th>
      <th>Details</th> <!-- Placeholder for variable data -->
    </tr>
  </thead>
  <tbody>
    <% @time_slots.each_with_index do |slot, index| %>
      <% entry = @daily_schedule.find { |e| e.hour == index } %>
      <% if entry.present? && entry.show_name.present? %>
        <tr>
          <td><%= slot %></td>
          <td>
            <strong>Show Name:</strong> <%= entry.show_name %><br>
            <% # Find the matching radio_jockey for this show_name %>
            <% matching_rj = RadioJockey.find_by(show_name: entry.show_name) %>
            <% if matching_rj.dj_name.present? %>
              <strong>DJ Name:</strong> <%= matching_rj.dj_name %>
            <% else %>
              <strong>Name:</strong> <%= matching_rj.first_name %> <%= matching_rj.last_name %>
            <% end %>
          </td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
